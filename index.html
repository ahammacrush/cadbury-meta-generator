<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadbury Meta Description Generator</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #5e3a8e 0%, #2d1b4e 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        .container { max-width: 900px; margin: 0 auto; }
        .header { text-align: center; color: white; margin-bottom: 30px; }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        .header p { font-size: 1.1em; opacity: 0.9; }
        .card { background: white; border-radius: 15px; padding: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); margin-bottom: 20px; }
        .input-group { margin-bottom: 20px; }
        label { display: block; font-weight: 600; margin-bottom: 8px; color: #5e3a8e; font-size: 1.1em; }
        input { width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1em; transition: border-color 0.3s; }
        input:focus { outline: none; border-color: #5e3a8e; }
        .generate-btn {
            background: linear-gradient(135deg, #5e3a8e 0%, #7e4db8 100%);
            color: white; border: none; padding: 15px 40px; font-size: 1.1em; font-weight: 600;
            border-radius: 8px; cursor: pointer; width: 100%;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 15px rgba(94, 58, 142, 0.3);
        }
        .generate-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(94, 58, 142, 0.4); }
        .generate-btn:active { transform: translateY(0); }
        .generate-btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }
        .regenerate-btn {
            background: #ffffff; color: #5e3a8e; border: 2px solid #5e3a8e;
            padding: 12px 30px; font-size: 1em; font-weight: 600; border-radius: 8px;
            cursor: pointer; display: inline-flex; align-items: center; gap: 8px;
            transition: all 0.2s; margin-top: 15px;
        }
        .regenerate-btn:hover { background: #f8f5fc; transform: translateY(-1px); }
        .regenerate-btn:active { transform: translateY(0); }
        .regenerate-icon { display: inline-block; transition: transform 0.3s; }
        .regenerate-btn:hover .regenerate-icon { transform: rotate(180deg); }
        .results { margin-top: 30px; }
        .result-item {
            background: #f8f9fa; border-left: 4px solid #5e3a8e;
            padding: 20px; margin-bottom: 15px; border-radius: 8px;
        }
        .result-text { font-size: 1.1em; line-height: 1.6; color: #333; margin-bottom: 15px; }
        .result-meta { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px; }
        .char-count { font-size: 0.9em; color: #28a745; font-weight: 600; }
        .char-count.error { color: #dc3545; }
        .actions { display: flex; gap: 10px; }
        .btn { padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.9em; transition: all 0.2s; }
        .btn-copy { background: #6c757d; color: white; }
        .btn-copy:hover { background: #5a6268; }
        .btn-copy.copied { background: #28a745; }
        .loading { text-align: center; padding: 40px; }
        .spinner {
            border: 4px solid #f3f3f3; border-top: 4px solid #5e3a8e;
            border-radius: 50%; width: 40px; height: 40px;
            animation: spin 1s linear infinite; margin: 0 auto 20px;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .tips { background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin-bottom: 20px; border-radius: 5px; }
        .tips h4 { color: #856404; margin-bottom: 10px; }
        .tips ul { margin-left: 20px; color: #856404; }
        .tips li { margin-bottom: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üç´ Cadbury Meta Description Generator</h1>
            <p>Smart meta descriptions based on your site's top performers</p>
        </div>

        <div class="card">
            <div class="tips">
                <h4>‚ö° Ultra-Fast Meta Description Generator</h4>
                <ul>
                    <li><strong>Just type the product name</strong> and click generate - that's it!</li>
                    <li><strong>Product name appears first</strong> for optimal SEO</li>
                    <li><strong>90 proven templates</strong> - all generate 145-150 characters (strict limit)</li>
                    <li><strong>Natural language</strong> - no robotic "Shop/Buy" openings</li>
                    <li><strong>Smart category detection</strong> - bags, envelopes, hampers all handled correctly</li>
                </ul>
            </div>

            <div class="input-group">
                <label for="productName">Product Name *</label>
                <input 
                    type="text" 
                    id="productName" 
                    placeholder='e.g., Cadbury Creme Egg Minis Bag 223g'
                    required
                    onkeypress="if(event.key === 'Enter') generateDescriptions()"
                />
            </div>

            <button class="generate-btn" id="generateBtn" onclick="generateDescriptions()">
                ‚ú® Generate Meta Description
            </button>

            <div id="results" class="results" style="display: none;"></div>
        </div>
    </div>

    <script>
        // 90 NATURAL LANGUAGE TEMPLATES - Strict 145-150 chars, no "Shop/Buy/Order"
        const templates = [
            // ENVELOPE TEMPLATES (20) - Message in quotes only
            {id: 1, pattern: "Treat {recipient} to the Cadbury \"{message}\" Dairy Milk Bar with Envelope. Perfect for {occasion}, delivered next day from Cadbury Gifts.", categories: ["envelope"], tone: "warm"},
            {id: 2, pattern: "Send the Cadbury \"{message}\" Chocolate Bar with Gift Envelope to {recipient}. Perfect gift for {occasion}, next-day delivery from Cadbury Gifts.", categories: ["envelope"], tone: "gifting"},
            {id: 3, pattern: "Surprise {recipient} with the Cadbury \"{message}\" Dairy Milk Bar and Envelope. Perfect for celebrations, next-day delivery from Cadbury Gifts.", categories: ["envelope"], tone: "surprising"},
            {id: 4, pattern: "Gift them the Cadbury \"{message}\" Chocolate Bar with Envelope. Perfect for any occasion, delivered next day from Cadbury Gifts.", categories: ["envelope"], tone: "thoughtful"},
            {id: 5, pattern: "Spoil {recipient} with the Cadbury \"{message}\" Dairy Milk Bar and Gift Envelope. Perfect for celebrations, next-day delivery from Cadbury Gifts.", categories: ["envelope"], tone: "indulgent"},
            {id: 6, pattern: "Celebrate {occasion} with the Cadbury \"{message}\" Chocolate Bar and Envelope. Perfect thoughtful gift, next-day delivery from Cadbury Gifts.", categories: ["envelope"], tone: "celebratory"},
            {id: 7, pattern: "Treat {recipient} to the Cadbury {weight} \"{message}\" Chocolate Bar with Envelope. Perfect for any occasion, next-day delivery from Cadbury Gifts.", categories: ["envelope"], tone: "specific"},
            {id: 8, pattern: "Send a sweet message with the Cadbury \"{message}\" Dairy Milk Bar and Envelope. Perfect for any occasion, delivered next day from Cadbury Gifts.", categories: ["envelope"], tone: "messaging"},
            {id: 9, pattern: "Gift the Cadbury \"{message}\" Dairy Milk Bar with Gift Sleeve to {recipient}. Perfect chocolate gift, next-day delivery from Cadbury Gifts.", categories: ["envelope"], tone: "classic"},
            {id: 10, pattern: "Surprise them with the Cadbury \"{message}\" Chocolate Bar and Envelope. Perfect for {occasion}, next-day delivery from Cadbury Gifts.", categories: ["envelope"], tone: "surprise"},
            {id: 11, pattern: "Treat them to the Cadbury \"{message}\" Dairy Milk Bar and Gift Envelope. Perfect for celebrations, next-day delivery from Cadbury Gifts.", categories: ["envelope"], tone: "treat"},
            {id: 12, pattern: "Send the Cadbury \"{message}\" Chocolate Bar with Gift Sleeve to {recipient}. Perfect for any occasion, next-day delivery from Cadbury Gifts.", categories: ["envelope"], tone: "sending"},
            {id: 13, pattern: "Delight {recipient} with the Cadbury \"{message}\" Dairy Milk Bar and Envelope. Perfect for {occasion}, next-day delivery from Cadbury Gifts.", categories: ["envelope"], tone: "delighting"},
            {id: 14, pattern: "Present {recipient} with the Cadbury \"{message}\" Chocolate Bar and Envelope. Perfect gift for any occasion, delivered next day from Cadbury Gifts.", categories: ["envelope"], tone: "presenting"},
            {id: 15, pattern: "Love the Cadbury \"{message}\" Dairy Milk Bar with Gift Envelope. Perfect for {occasion}, next-day delivery available from Cadbury Gifts.", categories: ["envelope"], tone: "loving"},
            {id: 16, pattern: "Enjoy the Cadbury \"{message}\" Chocolate Bar with Envelope. Perfect thoughtful gift for any occasion, next-day delivery from Cadbury Gifts.", categories: ["envelope"], tone: "enjoying"},
            {id: 17, pattern: "Discover the Cadbury \"{message}\" Dairy Milk Bar and Gift Envelope. Perfect for celebrations, delivered next day from Cadbury Gifts.", categories: ["envelope"], tone: "discovering"},
            {id: 18, pattern: "Get the Cadbury \"{message}\" Chocolate Bar with Gift Sleeve for {recipient}. Perfect for any occasion, next-day delivery from Cadbury Gifts.", categories: ["envelope"], tone: "getting"},
            {id: 19, pattern: "Indulge {recipient} with the Cadbury \"{message}\" Dairy Milk Bar and Envelope. Perfect for {occasion}, next-day delivery from Cadbury Gifts.", categories: ["envelope"], tone: "indulging"},
            {id: 20, pattern: "Make their day with the Cadbury \"{message}\" Chocolate Bar and Envelope. Perfect gift for any occasion, next-day delivery from Cadbury Gifts.", categories: ["envelope"], tone: "making"},
            
            // BAG/STANDARD TEMPLATES (25) - Safe, no sharing assumptions
            {id: 21, pattern: "Treat yourself to the {name}. Delicious Cadbury chocolate, delivered next day when you order by 4pm from Cadbury Gifts.", categories: ["standard"], tone: "self"},
            {id: 22, pattern: "Enjoy the {name} from Cadbury Gifts. {contents} Perfect for any occasion, delivered next day when you order by 4pm.", categories: ["standard"], tone: "enjoying"},
            {id: 23, pattern: "Discover the {name} at Cadbury Gifts. Delicious chocolate treats, delivered next day when you order by 4pm today.", categories: ["standard"], tone: "discovering"},
            {id: 24, pattern: "Get the {name} delivered next day from Cadbury Gifts. {contents} Perfect for any occasion, order by 4pm.", categories: ["standard"], tone: "getting"},
            {id: 25, pattern: "Love the {name}? Delicious Cadbury chocolate delivered next day when you order by 4pm from Cadbury Gifts.", categories: ["standard"], tone: "loving"},
            {id: 26, pattern: "Indulge in the {name} from Cadbury Gifts. {contents} Perfect chocolate treat, next-day delivery when you order by 4pm.", categories: ["standard"], tone: "indulging"},
            {id: 27, pattern: "Treat them to the {name}. Delicious Cadbury favourites, delivered next day when you order by 4pm from Cadbury Gifts.", categories: ["standard"], tone: "treating"},
            {id: 28, pattern: "Gift the {name} from Cadbury Gifts. {contents} Perfect for any occasion, next-day delivery when you order by 4pm.", categories: ["standard"], tone: "gifting"},
            {id: 29, pattern: "Send the {name} to {recipient}. Delicious chocolate from Cadbury Gifts, delivered next day when you order by 4pm.", categories: ["standard"], tone: "sending"},
            {id: 30, pattern: "Enjoy the {name} - delicious Cadbury chocolate. Perfect for any occasion, next-day delivery from Cadbury Gifts when you order by 4pm.", categories: ["standard"], tone: "enjoy2"},
            {id: 31, pattern: "Discover the {name} at Cadbury Gifts. {contents} Perfect chocolate treat, delivered next day when you order by 4pm.", categories: ["standard"], tone: "discover2"},
            {id: 32, pattern: "Treat yourself to the {name} from Cadbury Gifts. Delicious chocolate, next-day delivery available when you order by 4pm.", categories: ["standard"], tone: "self2"},
            {id: 33, pattern: "Get the {name} delivered to your door. {contents} Perfect from Cadbury Gifts, next-day delivery when you order by 4pm.", categories: ["standard"], tone: "door"},
            {id: 34, pattern: "Love the {name} from Cadbury Gifts. Delicious Cadbury chocolate, delivered next day when you order by 4pm today.", categories: ["standard"], tone: "love2"},
            {id: 35, pattern: "Delight in the {name}. {contents} Perfect for any occasion, next-day delivery from Cadbury Gifts when you order by 4pm.", categories: ["standard"], tone: "delight"},
            {id: 36, pattern: "Savour the {name} from Cadbury Gifts. Delicious chocolate treats, delivered next day when you order by 4pm.", categories: ["standard"], tone: "savour"},
            {id: 37, pattern: "Experience the {name}. {contents} Perfect from Cadbury Gifts, next-day delivery when you order by 4pm today.", categories: ["standard"], tone: "experience"},
            {id: 38, pattern: "Gift them the {name} from Cadbury Gifts. Delicious Cadbury chocolate, next-day delivery when you order by 4pm.", categories: ["standard"], tone: "gift2"},
            {id: 39, pattern: "Send the {name} from Cadbury Gifts. {contents} Perfect for any occasion, delivered next day when you order by 4pm.", categories: ["standard"], tone: "send2"},
            {id: 40, pattern: "Treat {recipient} to the {name}. Delicious chocolate from Cadbury Gifts, next-day delivery when you order by 4pm.", categories: ["standard"], tone: "treat2"},
            {id: 41, pattern: "Enjoy the delicious {name} from Cadbury Gifts. {contents} Next-day delivery when you order by 4pm today.", categories: ["standard"], tone: "enjoy3"},
            {id: 42, pattern: "Discover the {name}. Delicious Cadbury chocolate treats, next-day delivery from Cadbury Gifts when you order by 4pm.", categories: ["standard"], tone: "discover3"},
            {id: 43, pattern: "Get the {name} from Cadbury Gifts today. {contents} Perfect for any occasion, next-day delivery when you order by 4pm.", categories: ["standard"], tone: "today"},
            {id: 44, pattern: "Indulge in the delicious {name}. {contents} Perfect from Cadbury Gifts, next-day delivery when you order by 4pm.", categories: ["standard"], tone: "indulge2"},
            {id: 45, pattern: "Love the {name}? {contents} Perfect for any occasion, next-day delivery from Cadbury Gifts when you order by 4pm.", categories: ["standard"], tone: "love3"},
            
            // HAMPER TEMPLATES (20) - {contents} placeholder
            {id: 46, pattern: "Treat {recipient} to the {name}. {contents} Perfect for any occasion, next-day delivery from Cadbury Gifts when you order by 4pm.", categories: ["hamper"], tone: "warm"},
            {id: 47, pattern: "Send the {name} to {recipient}. {contents} Perfect gift for any occasion, next-day delivery from Cadbury Gifts.", categories: ["hamper"], tone: "sending"},
            {id: 48, pattern: "Surprise them with the {name}. {contents} Perfect for celebrations, next-day delivery from Cadbury Gifts when you order by 4pm.", categories: ["hamper"], tone: "surprising"},
            {id: 49, pattern: "Gift the {name} from Cadbury Gifts. {contents} Perfect for any occasion, delivered next day when you order by 4pm.", categories: ["hamper"], tone: "gifting"},
            {id: 50, pattern: "Treat {recipient} to the {name} chocolate hamper. {contents} Perfect for celebrations, next-day delivery from Cadbury Gifts.", categories: ["hamper"], tone: "treating"},
            {id: 51, pattern: "Send the {name} from Cadbury Gifts. {contents} Perfect for any occasion, delivered next day when you order by 4pm.", categories: ["hamper"], tone: "delivery"},
            {id: 52, pattern: "Spoil them with the {name}. {contents} Perfect for celebrations, next-day delivery from Cadbury Gifts when you order by 4pm.", categories: ["hamper"], tone: "indulgent"},
            {id: 53, pattern: "Delight {recipient} with the {name}. {contents} Perfect for any occasion, next-day delivery from Cadbury Gifts.", categories: ["hamper"], tone: "delightful"},
            {id: 54, pattern: "Surprise {recipient} with the {name} chocolate hamper. {contents} Perfect for {occasion}, next-day delivery from Cadbury Gifts.", categories: ["hamper"], tone: "surprise"},
            {id: 55, pattern: "Gift them the {name} from Cadbury Gifts. {contents} Perfect for any occasion, delivered next day when you order by 4pm.", categories: ["hamper"], tone: "giving"},
            {id: 56, pattern: "Treat {recipient} to the {name} at Cadbury Gifts. {contents} Perfect for celebrations, next-day delivery when you order by 4pm.", categories: ["hamper"], tone: "celebratory"},
            {id: 57, pattern: "Send the {name} chocolate hamper to {recipient}. {contents} Perfect for {occasion}, next-day delivery from Cadbury Gifts.", categories: ["hamper"], tone: "recipient"},
            {id: 58, pattern: "Enjoy the {name} from Cadbury Gifts. {contents} Perfect for any occasion, next-day delivery when you order by 4pm.", categories: ["hamper"], tone: "enjoying"},
            {id: 59, pattern: "Discover the {name} at Cadbury Gifts. {contents} Perfect for celebrations, delivered next day when you order by 4pm.", categories: ["hamper"], tone: "discovering"},
            {id: 60, pattern: "Get the {name} delivered next day. {contents} Perfect from Cadbury Gifts, order by 4pm today.", categories: ["hamper"], tone: "getting"},
            {id: 61, pattern: "Love the {name}? {contents} Perfect for any occasion, next-day delivery from Cadbury Gifts when you order by 4pm.", categories: ["hamper"], tone: "loving"},
            {id: 62, pattern: "Indulge in the {name} from Cadbury Gifts. {contents} Perfect for celebrations, next-day delivery when you order by 4pm.", categories: ["hamper"], tone: "indulging"},
            {id: 63, pattern: "Present {recipient} with the {name}. {contents} Perfect gift for any occasion, next-day delivery from Cadbury Gifts.", categories: ["hamper"], tone: "presenting"},
            {id: 64, pattern: "Make their day with the {name}. {contents} Perfect from Cadbury Gifts, next-day delivery when you order by 4pm.", categories: ["hamper"], tone: "making"},
            {id: 65, pattern: "Celebrate with the {name} from Cadbury Gifts. {contents} Perfect for {occasion}, next-day delivery when you order by 4pm.", categories: ["hamper"], tone: "celebrate"},
            
            // SEASONAL TEMPLATES (15)
            {id: 66, pattern: "Celebrate {occasion} with the {name}. {contents} Perfect for family and friends, next-day delivery from Cadbury Gifts.", categories: ["seasonal"], tone: "family"},
            {id: 67, pattern: "Treat them to the {name} this {occasion}. Perfect chocolate gift from Cadbury Gifts, next-day delivery when you order by 4pm.", categories: ["seasonal"], tone: "treat"},
            {id: 68, pattern: "Make {occasion} special with the {name}. {contents} Perfect from Cadbury Gifts, next-day delivery when you order by 4pm.", categories: ["seasonal"], tone: "special"},
            {id: 69, pattern: "Enjoy the {name} for {occasion} at Cadbury Gifts. {contents} Perfect for celebrations, next-day delivery when you order by 4pm.", categories: ["seasonal"], tone: "celebrations"},
            {id: 70, pattern: "Discover the {name} {occasion} gift. {contents} Perfect from Cadbury Gifts, next-day delivery when you order by 4pm.", categories: ["seasonal"], tone: "gift"},
            {id: 71, pattern: "Get the {name} for {occasion}. {contents} Perfect from Cadbury Gifts, delivered next day when you order by 4pm.", categories: ["seasonal"], tone: "getting"},
            {id: 72, pattern: "Treat {recipient} to the {name} for {occasion}. Perfect celebration gift from Cadbury Gifts, next-day delivery when you order by 4pm.", categories: ["seasonal"], tone: "treatrecipient"},
            {id: 73, pattern: "Send the {name} this {occasion}. {contents} Perfect for celebrations, next-day delivery from Cadbury Gifts when you order by 4pm.", categories: ["seasonal"], tone: "send"},
            {id: 74, pattern: "Love the {name} for {occasion}? {contents} Perfect from Cadbury Gifts, next-day delivery when you order by 4pm.", categories: ["seasonal"], tone: "love"},
            {id: 75, pattern: "Celebrate {occasion} with the {name} from Cadbury Gifts. Perfect for gifting, delivered next day when you order by 4pm.", categories: ["seasonal"], tone: "celebrate2"},
            {id: 76, pattern: "Delight them with the {name} for {occasion}. {contents} Perfect from Cadbury Gifts, next-day delivery when you order by 4pm.", categories: ["seasonal"], tone: "delight"},
            {id: 77, pattern: "Enjoy the {name} this {occasion}. {contents} Perfect from Cadbury Gifts, next-day delivery when you order by 4pm today.", categories: ["seasonal"], tone: "enjoy"},
            {id: 78, pattern: "Gift the {name} for {occasion}. {contents} Perfect from Cadbury Gifts, delivered next day when you order by 4pm.", categories: ["seasonal"], tone: "gifting"},
            {id: 79, pattern: "Surprise them with the {name} for {occasion}. {contents} Perfect from Cadbury Gifts, next-day delivery when you order by 4pm.", categories: ["seasonal"], tone: "surprise"},
            {id: 80, pattern: "Indulge in the {name} this {occasion}. {contents} Perfect from Cadbury Gifts, next-day delivery when you order by 4pm.", categories: ["seasonal"], tone: "indulge"},
            
            // CORPORATE TEMPLATES (5)
            {id: 81, pattern: "Treat your team to the {name}. {contents} Professional gifting with next-day delivery from Cadbury Gifts when you order by 4pm.", categories: ["corporate"], tone: "professional"},
            {id: 82, pattern: "Present your team with the {name}. {contents} Perfect for employee appreciation, next-day delivery from Cadbury Gifts.", categories: ["corporate"], tone: "team"},
            {id: 83, pattern: "Gift your team the {name} from Cadbury Gifts. {contents} Perfect for corporate occasions, next-day delivery when you order by 4pm.", categories: ["corporate"], tone: "giftteam"},
            {id: 84, pattern: "Treat employees to the {name}. {contents} Perfect corporate gift from Cadbury Gifts, next-day delivery when you order by 4pm.", categories: ["corporate"], tone: "employees"},
            {id: 85, pattern: "Send the {name} to your team. {contents} Perfect for employee recognition, next-day delivery from Cadbury Gifts when you order by 4pm.", categories: ["corporate"], tone: "sendteam"},
            
            // LUXURY TEMPLATES (5)
            {id: 86, pattern: "Indulge in the {name} luxury hamper. {contents} Perfect for special occasions, next-day delivery from Cadbury Gifts when you order by 4pm.", categories: ["luxury"], tone: "luxury"},
            {id: 87, pattern: "Treat them to the {name}. {contents} Perfect luxury gift for celebrations, next-day delivery from Cadbury Gifts when you order by 4pm.", categories: ["luxury"], tone: "luxurytreat"},
            {id: 88, pattern: "Celebrate in style with the {name}. {contents} Perfect luxury hamper from Cadbury Gifts, next-day delivery when you order by 4pm.", categories: ["luxury"], tone: "style"},
            {id: 89, pattern: "Spoil them with the {name} premium hamper. {contents} Perfect for celebrations, next-day delivery from Cadbury Gifts when you order by 4pm.", categories: ["luxury"], tone: "spoil"},
            {id: 90, pattern: "Gift the {name} luxury hamper. {contents} Perfect for special occasions, next-day delivery from Cadbury Gifts when you order by 4pm.", categories: ["luxury"], tone: "luxurygifting"}
        ];

        // IMPROVED category detection - includes "bag" as standard
        function detectCategoryFromName(productName) {
            const name = productName.toLowerCase();
            
            // Bags are standard products (single item type)
            if (name.includes('bag') || name.includes(' bar') && !name.includes('envelope')) return 'standard';
            
            // Envelopes have message cards
            if (name.includes('envelope') || name.includes('sleeve')) return 'envelope';
            
            // Hampers are mixed collections
            if (name.includes('hamper') || name.includes('basket') || name.includes('gift box')) return 'hamper';
            
            // Seasonal keywords
            if (name.includes('easter') || name.includes('christmas') || name.includes('valentine')) return 'seasonal';
            
            // Corporate
            if (name.includes('corporate') || name.includes('employee') || name.includes('team')) return 'corporate';
            
            // Luxury
            if (name.includes('luxury') || name.includes('premium') || name.includes('ultimate') || name.includes('wine')) return 'luxury';
            
            // Default to standard for single products
            return 'standard';
        }

        // Extract information from product name
        function extractProductInfo(productName, category) {
            const fullText = productName.toLowerCase();
            
            const info = {
                name: productName,
                recipient: 'them',
                occasion: 'any occasion',
                message: '',
                weight: '110g',
                contents: 'Delicious Cadbury chocolate.',
                productType: category
            };

            // Extract recipient
            if (fullText.includes('mum') || fullText.includes('mother')) info.recipient = 'her';
            else if (fullText.includes('dad') || fullText.includes('father')) info.recipient = 'him';
            else if (fullText.includes('grandad')) info.recipient = 'Grandad';
            else if (fullText.includes('grandma')) info.recipient = 'Grandma';
            else if (fullText.includes('wife')) info.recipient = 'your partner';
            else if (fullText.includes('husband')) info.recipient = 'your partner';
            else if (fullText.includes('friend')) info.recipient = 'your friend';
            else if (fullText.includes('teacher')) info.recipient = 'their teacher';
            else if (fullText.includes('team')) info.recipient = 'your team';
            
            // Extract occasion
            if (fullText.includes('easter')) info.occasion = 'Easter';
            else if (fullText.includes('christmas')) info.occasion = 'Christmas';
            else if (fullText.includes('birthday')) info.occasion = 'birthdays';
            else if (fullText.includes('valentine')) info.occasion = "Valentine's Day";
            else if (fullText.includes('mother') && fullText.includes('day')) info.occasion = "Mother's Day";
            else if (fullText.includes('father') && fullText.includes('day')) info.occasion = "Father's Day";
            
            // Extract message for envelopes
            if (category === 'envelope') {
                const messagePatterns = [
                    'best mum', 'best dad', 'best grandad', 'best grandma', 'best friend',
                    'i love you', 'love you', 'thank you', 'well done', 'congratulations',
                    'great job', 'happy birthday', 'special wife', 'special husband', 
                    "you're amazing", 'happy easter', 'merry christmas'
                ];
                
                for (const pattern of messagePatterns) {
                    if (fullText.includes(pattern)) {
                        info.message = pattern.split(' ').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' ');
                        break;
                    }
                }
                
                if (!info.message) {
                    info.message = productName;
                }
            }
            
            // Extract weight
            const weightMatch = productName.match(/(\d+)g/i);
            if (weightMatch) {
                info.weight = weightMatch[0];
            }
            
            // Better contents for hampers
            if (category === 'hamper' && fullText.includes('sharing')) {
                info.contents = 'Filled with delicious Cadbury favourites.';
            } else if (category === 'hamper') {
                info.contents = 'Packed with Cadbury treats.';
            }
            
            return info;
        }

        // Generate variations - strict 145-150 char check
        function generateVariations(info, category) {
            const relevantTemplates = templates.filter(t => t.categories.includes(category));
            const shuffled = [...relevantTemplates].sort(() => Math.random() - 0.5);
            
            let attempts = 0;
            let selected = null;
            
            // Try up to 10 templates to find one that's 145-150 chars
            while (attempts < 10 && !selected) {
                const template = shuffled[attempts];
                let description = template.pattern;

                // Replace placeholders
                description = description
                    .replace(/\{name\}/g, info.name)
                    .replace(/\{recipient\}/g, info.recipient)
                    .replace(/\{message\}/g, info.message)
                    .replace(/\{occasion\}/g, info.occasion)
                    .replace(/\{weight\}/g, info.weight)
                    .replace(/\{contents\}/g, info.contents)
                    .replace(/\{productType\}/g, info.productType);

                const length = description.length;
                
                // Only accept if 145-150 chars
                if (length >= 145 && length <= 150) {
                    selected = {
                        text: description,
                        charCount: length,
                        tone: template.tone
                    };
                }
                
                attempts++;
            }
            
            // Fallback if no perfect match found
            if (!selected) {
                const template = shuffled[0];
                let description = template.pattern
                    .replace(/\{name\}/g, info.name)
                    .replace(/\{recipient\}/g, info.recipient)
                    .replace(/\{message\}/g, info.message)
                    .replace(/\{occasion\}/g, info.occasion)
                    .replace(/\{weight\}/g, info.weight)
                    .replace(/\{contents\}/g, info.contents)
                    .replace(/\{productType\}/g, info.productType);
                    
                selected = {
                    text: description,
                    charCount: description.length,
                    tone: template.tone
                };
            }
            
            return [selected];
        }

        // Generate descriptions
        function generateDescriptions() {
            const productName = document.getElementById('productName').value.trim();

            if (!productName) {
                alert('Please enter a product name');
                return;
            }

            const btn = document.getElementById('generateBtn');
            btn.disabled = true;
            btn.textContent = 'Generating...';

            const resultsDiv = document.getElementById('results');
            resultsDiv.style.display = 'block';
            resultsDiv.innerHTML = '<div class="loading"><div class="spinner"></div><p>Creating your meta description...</p></div>';

            setTimeout(() => {
                const category = detectCategoryFromName(productName);
                const info = extractProductInfo(productName, category);
                const descriptions = generateVariations(info, category);
                
                displayResults(descriptions, productName);
                
                btn.disabled = false;
                btn.textContent = '‚ú® Generate Meta Description';
            }, 400);
        }

        // Display results - only show error if over 150
        function displayResults(descriptions, productName) {
            const resultsDiv = document.getElementById('results');
            const desc = descriptions[0];
            const charStatus = desc.charCount > 150 ? 'error' : '';
            const charMessage = desc.charCount > 150 ? '(TOO LONG - must be 150 max)' : '(perfect length)';
            
            const html = `
                <div class="result-item" id="result-0">
                    <div class="result-text">${desc.text}</div>
                    <div class="result-meta">
                        <span class="char-count ${charStatus}">
                            ${desc.charCount} characters ${charMessage} ‚Ä¢ ${desc.tone} tone
                        </span>
                        <div class="actions">
                            <button class="btn btn-copy" onclick="copyToClipboard('${desc.text.replace(/'/g, "\\'")}')">
                                üìã Copy
                            </button>
                        </div>
                    </div>
                </div>
                <div style="text-align: center;">
                    <button class="regenerate-btn" onclick="regenerateDescription()">
                        <span class="regenerate-icon">üîÑ</span> Generate Different Option
                    </button>
                </div>
            `;

            resultsDiv.innerHTML = html;
        }

        // Regenerate
        function regenerateDescription() {
            const productName = document.getElementById('productName').value.trim();
            const category = detectCategoryFromName(productName);
            const info = extractProductInfo(productName, category);
            const descriptions = generateVariations(info, category);
            displayResults(descriptions, productName);
        }

        // Copy to clipboard
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = '‚úì Copied!';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.classList.remove('copied');
                }, 2000);
            });
        }
    </script>
</body>
</html>
